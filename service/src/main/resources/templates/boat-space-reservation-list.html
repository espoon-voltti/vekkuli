<html layout:decorate="~{employee-layout}">
<head>
    <title>Vekkuli - Venepaikat</title>
</head>
<body layout:fragment="body">
<div class="section">
    <div class="container">
        <div class="block reservation-list-header">
            <div class="field">
                <p class="control has-icons-left has-icons-right">
                    <input class="input search-input" type="text" th:aria-label="#{boatSpaces.searchButton}"/>
                    <span class="icon is-small is-left">
                       <div th:replace="~{fragments/icons :: search}"></div>
                   </span>
                    <span class="icon is-small is-right">
                       <div th:replace="~{fragments/icons :: cross}"></div>
                   </span>
                </p>
            </div>

            <a class="add-reservation" th:href="@{'/virkailija/venepaikat/varaukset/luo'}">
               <span class="icon is-large">
                   <div th:replace="~{fragments/icons :: plus-round}"></div>
               </span>
                <span class="label">Luo varaus</span>
            </a>
        </div>
        <div class="block">
            <h1 class="label" th:text="#{boatSpaceReservation.title.harbor}">Satama</h1>
            <div class="tag-container">
                <a th:each="harbor : ${harbors}"
                   th:class="'button is-rounded is-primary ' + ${params.hasHarbor(harbor.id) ? '' : 'is-outlined'}"
                   th:id="'harbor-' + ${harbor.id}"
                   th:href="@{'/virkailija/venepaikat/varaukset' + ${params.toggleHarbor(harbor.id)}}">
                    <span class="icon is-small" th:if="${params.hasHarbor(harbor.id)}">
                      <div th:replace="~{fragments/icons :: check}"></div>
                    </span>
                    <span th:text="${harbor.name}">Haukilahti</span>
                </a>
            </div>
        </div>
        <div class="block">
            <h1 class="label" th:text="#{boatSpaceReservation.title.amenity}">Paikan varuste</h1>
            <div class="tag-container">
                <a th:each="amenity : ${amenities}"
                   th:class="'button is-rounded is-primary ' + ${params.hasAmenity(amenity) ? '' : 'is-outlined'}"
                   th:id="'amenity-' + ${amenity.toString()}"
                   th:href="@{'/virkailija/venepaikat/varaukset' + ${params.toggleAmenity(amenity)}}">
                    <span class="icon is-small" style="stroke: white" th:if="${params.hasAmenity(amenity)}">
                      <div th:replace="~{fragments/icons :: check}"></div>
                    </span>
                    <span th:text="#{${'boatSpaces.amenityOption.' + amenity}}">Buoy</span>
                </a>
            </div>
        </div>

        <div class="reservation-list block">
            <table class="table is-hoverable">
                <thead>
                <tr>
                    <th>
                        <a th:href="@{'/virkailija/venepaikat/varaukset' + ${params.toggleSort('PLACE')}}">
                            <span th:text="#{boatSpaceReservation.title.harbor}">Satama</span>
                            <div th:replace="~{fragments/icons :: sort(dir=${params.getSortForColumn('PLACE')})}"></div>
                        </a></th>
                    <th>
                        <a th:href="@{'/virkailija/venepaikat/varaukset' + ${params.toggleSort('PLACE')}}">
                            <span th:text="#{boatSpaceReservation.title.place}">Paikka</span>
                            <div th:replace="~{fragments/icons :: sort(dir=${params.getSortForColumn('PLACE')})}"></div>
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/virkailija/venepaikat/varaukset' + ${params.toggleSort('PLACE_TYPE')}}">
                            <span th:text="#{boatSpaceReservation.title.type}">Paikan tyyppi</span>
                            <div th:replace="~{fragments/icons :: sort(dir=${params.getSortForColumn('PLACE_TYPE')})}"></div>
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/virkailija/venepaikat/varaukset' + ${params.toggleSort('CUSTOMER')}}">
                            <span th:text="#{boatSpaceReservation.title.subject}">Varaaja</span>
                            <div th:replace="~{fragments/icons :: sort(dir=${params.getSortForColumn('CUSTOMER')})}"></div>
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/virkailija/venepaikat/varaukset' + ${params.toggleSort('HOME_TOWN')}}">
                            <span th:text="#{boatSpaceReservation.title.homeTown}">Kotikunta</span>
                            <div th:replace="~{fragments/icons :: sort(dir=${params.getSortForColumn('HOME_TOWN')})}"></div>
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/virkailija/venepaikat/varaukset' + ${params.toggleSort('BOAT')}}">
                            <span th:text="#{boatSpaceReservation.title.boat}">Bene</span>
                            <div th:replace="~{fragments/icons :: sort(dir=${params.getSortForColumn('BOAT')})}"></div>
                        </a>
                    </th>
                    <th><span th:text="#{boatSpaceReservation.title.payment}">Maksu</span></th>
                    <th>
                        <a th:href="@{'/virkailija/venepaikat/varaukset' + ${params.toggleSort('START_DATE')}}">
                            <span th:text="#{boatSpaceReservation.title.startDate}">Varaus tehty</span></span>
                            <div th:replace="~{fragments/icons :: sort(dir=${params.getSortForColumn('START_DATE')})}"></div>
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/virkailija/venepaikat/varaukset' + ${params.toggleSort('END_DATE')}}">
                            <span th:text="#{boatSpaceReservation.title.endDate}">Varaus päättyy</span>
                            <div th:replace="~{fragments/icons :: sort(dir=${params.getSortForColumn('END_DATE')})}"></div>
                        </a>
                    </th>
                    <th><span th:text="#{boatSpaceReservation.title.ownership}">Omistussuhde</span></th>
                </tr>
                </thead>
                <tbody>
                <tr class="reservation-item" th:id="'boat-space-' + ${result.boatSpaceId}"
                    th:each="result : ${reservations}"
                    hx-trigger="click"
                    th:attr="hx-get=|/virkailija/kayttaja/${result.citizenId}|"
                    hx-push-url="true"
                    hx-target=".section"
                    hx-select=".section"
                >
                    <td th:text="${result.locationName}">Kivenlahti</td>
                    <td>
                        <span th:text="${result.place}">A135</span>
                        <span class="icon ml-s" th:if="${result.hasWarning('BoatWidth') || result.hasWarning('BoatLength')}">
                            <div th:replace="~{fragments/icons :: warning-exclamation(false)}"></div>
                        </span>
                    </td>
                    <td th:text="#{${'boatSpaces.type' + result.type + 'Option'}}">Laituripaikka</td>
                    <td><a th:href="|/virkailija/kayttaja/${result.citizenId}|"><span
                            th:text="${result.firstName}">Veikko</span><br /><span
                            th:text="${result.lastName}">Veneilijä</span></a></td>
                    <td th:text="${result.homeTown}">Espoo</td>
                    <td th:text="${result.boatRegistrationCode}">P567123</td>
                    <td><!-- TODO payment date and warning --></td>
                    <td th:text="${#temporals.format(result.startDate, 'yyyy-MM-dd HH:mm')}">03.06.2024 14:56</td>
                    <td th:text="${#temporals.format(result.endDate, 'yyyy-MM-dd HH:mm')}">01.02.2025</td>
                    <td class="has-text-centered">
                        <div class="is-flex is-align-items-center is-justify-content-center">
                            <p th:text="#{${'boatApplication.ownershipOption.' + result.boatOwnership}}">Omistaja</p>
                            <span class="icon ml-s" th:if="${result.hasWarning('BoatOwnership')}">
                                <div th:replace="~{fragments/icons :: warning-exclamation(false)}"></div>
                            </span>
                        </div>
                    </td>

                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>
